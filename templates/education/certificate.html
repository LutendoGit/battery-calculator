<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Certificate â€” Battery Education</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <style>
      body {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      }
      .sheet {
        max-width: 980px;
        margin: 20px auto;
        background: white;
        border-radius: 12px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        padding: 40px;
      }
      .title {
        color: #667eea;
        font-weight: 800;
        letter-spacing: 0.5px;
      }
      .name {
        font-size: 2rem;
        font-weight: 800;
        color: #111827;
      }
      .muted { color: #555; }
      .frame {
        border: 3px solid #667eea;
        border-radius: 12px;
        padding: 30px;
      }
      @media print {
        body { background: white; padding: 0; }
        .sheet { box-shadow: none; margin: 0; border-radius: 0; }
        .no-print { display: none !important; }
      }
    </style>
  </head>
  <body>
    <div class="sheet">
      <div class="no-print d-flex justify-content-between align-items-center mb-3">
        <a class="btn btn-outline-secondary" href="{{ url_for('education.progress') }}">Back to progress</a>
        <div>
          <a class="btn btn-outline-secondary" href="{{ url_for('education.certificate_pdf') }}">Download PDF</a>
          <button class="btn btn-primary" onclick="window.print()">Print</button>
        </div>
      </div>

      <div class="frame text-center">
        <div class="mb-3">
          <div class="title h2 m-0">Certificate of Completion</div>
          <div class="muted">Lithium Battery Educational Platform</div>
        </div>

        <div class="my-4">
          <div class="muted">This certifies that</div>
          <div class="name">{{ user.username }}</div>
          <div class="muted mt-2">has completed the required learning modules and assessments.</div>
        </div>

        <div class="row mt-4">
          <div class="col-md-6 text-left">
            <div class="muted">Date</div>
            <div><strong>{{ issued_date }}</strong></div>
          </div>
          <div class="col-md-6 text-right">
            <div class="muted">Certificate ID</div>
            <div><strong>{{ certificate_id }}</strong></div>
          </div>
        </div>

        <hr>

        <div class="text-left">
          <div class="muted mb-2">Completed lessons:</div>
          <ul>
            {% for item in completed_lessons %}
              <li>{{ item.title }}</li>
            {% endfor %}
          </ul>
          <div class="muted mb-2">Quiz attempts recorded:</div>
          <div><strong>{{ quiz_count }}</strong></div>
          <div class="muted mb-2 mt-2">Overall quiz score (avg of attempted quizzes):</div>
          <div><strong>{{ '%.0f'|format(overall_pct) }}%</strong></div>
        </div>
      </div>
    </div>
  </body>
</html>
